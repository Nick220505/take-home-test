@if (error(); as errorMessage) {
  <div class="loans__state">
    <p>{{ errorMessage }}</p>
  </div>
} @else if (loading()) {
  <div class="loans__state">
    <mat-progress-spinner
      diameter="36"
      mode="indeterminate"
    ></mat-progress-spinner>
  </div>
} @else if (loans().length === 0) {
  <div class="loans__state">
    <p>No loans found.</p>
  </div>
} @else {
  @let displayedColumns =
    ["amount", "currentBalance", "applicantName", "status"];
  <table mat-table [dataSource]="dataSource" class="loans__table" matSort>
    <ng-container matColumnDef="amount">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Loan Amount</th>
      <td mat-cell *matCellDef="let element">
        <span class="loans__amount">{{ element.amount | currency }}</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="currentBalance">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Current Balance</th>
      <td mat-cell *matCellDef="let element">
        {{ element.currentBalance | currency }}
      </td>
    </ng-container>

    <ng-container matColumnDef="applicantName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Applicant</th>
      <td mat-cell *matCellDef="let element">{{ element.applicantName }}</td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
      <td mat-cell *matCellDef="let element">
        <span
          class="loans__status"
          [class.loans__status--paid]="element.status === 'paid'"
        >
          {{ element.status }}
        </span>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
}
